<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guardi√£o do Primeiro Canto</title>

<style>
body{
    margin:0;
    font-family:sans-serif;
    text-align:center;
    background:linear-gradient(#d4af37,#b8962e);
    color:#222;
}

h1{margin-top:20px}

.avatar{
    width:140px;
    margin:15px auto;
}

.barra{
    width:80%;
    height:18px;
    background:#9a7c27;
    border-radius:20px;
    margin:5px auto 15px;
    overflow:hidden;
}

.preenchimento{
    height:100%;
    border-radius:20px;
}

.btn{
    width:80%;
    padding:18px;
    margin:12px auto;
    border-radius:18px;
    background:#111;
    color:white;
    font-size:18px;
    border:none;
    display:flex;
    align-items:center;
    gap:12px;
}

.btn img{
    width:35px;
}

.icone{
    width:28px;
    vertical-align:middle;
}
</style>
</head>
<body>

<h1>üêì O Guardi√£o do Primeiro Canto</h1>

<img id="avatar" class="avatar" src="fase-1.png">

<h2 id="nivel">N√≠vel 1 ‚Ä¢ Rec√©m-Nascido</h2>
<div id="idade">Idade: ‚Äî</div>
<div id="personalidade">Personalidade: ‚Äî</div>

<!-- ATRIBUTOS -->

<div>
<img class="icone" src="vitalidade.png"> <span id="vitalidadeTxt"></span>
<div class="barra"><div id="vitalidadeBar" class="preenchimento" style="background:#e53935"></div></div>
</div>

<div>
<img class="icone" src="forca.png"> <span id="forcaTxt"></span>
<div class="barra"><div id="forcaBar" class="preenchimento" style="background:#6d4c41"></div></div>
</div>

<div>
<img class="icone" src="foco.png"> <span id="focoTxt"></span>
<div class="barra"><div id="focoBar" class="preenchimento" style="background:#1e88e5"></div></div>
</div>

<div>
<img class="icone" src="resistencia.png"> <span id="resTxt"></span>
<div class="barra"><div id="resBar" class="preenchimento" style="background:#43a047"></div></div>
</div>

<div>
<img class="icone" src="percepcao.png"> <span id="perTxt"></span>
<div class="barra"><div id="perBar" class="preenchimento" style="background:#fdd835"></div></div>
</div>

<!-- BOT√ïES -->

<button class="btn" onclick="acao('vitalidade',5)">
<img src="alimentar.png"> Alimentar
</button>

<button class="btn" onclick="acao('forca',4)">
<img src="cuidar.png"> Cuidar do espa√ßo
</button>

<button class="btn" onclick="acao('foco',4)">
<img src="movimento.png"> Movimento leve
</button>

<button class="btn" onclick="acao('resistencia',3)">
<img src="contato.png"> Contato calmo
</button>

<button class="btn" onclick="acao('percepcao',3)">
<img src="observar.png"> Observar
</button>

<script>

const atributos = ["vitalidade","forca","foco","resistencia","percepcao"];

/* ---------- NASCIMENTO ---------- */

if(!localStorage.getItem("dataNascimento")){
    const data = prompt("Digite a data de nascimento do Beatito (AAAA-MM-DD)");
    if(data){
        localStorage.setItem("dataNascimento",data);
    }
}

/* ---------- ATRIBUTOS ---------- */

let status = JSON.parse(localStorage.getItem("status")) || {
    vitalidade:100,
    forca:80,
    foco:80,
    resistencia:70,
    percepcao:50
};

/* ---------- FUN√á√ÉO A√á√ÉO ---------- */

function acao(nome,valor){
    status[nome]+=valor;
    salvar();
    atualizar();
}

/* ---------- SALVAR ---------- */

function salvar(){
    localStorage.setItem("status",JSON.stringify(status));
}

/* ---------- IDADE REAL ---------- */

function calcularIdade(){
    const nasc = localStorage.getItem("dataNascimento");
    if(!nasc) return "‚Äî";

    const n = new Date(nasc);
    const agora = new Date();

    const diff = agora-n;

    const dias=Math.floor(diff/86400000);
    const horas=Math.floor(diff/3600000%24);
    const min=Math.floor(diff/60000%60);

    return `${dias}d ${horas}h ${min}m`;
}

/* ---------- FASE POR IDADE ---------- */

function faseIdade(dias){

if(dias<7) return ["Rec√©m-Nascido","fase-1.png"];
if(dias<30) return ["Filhote","fase-2.png"];
if(dias<90) return ["Jovem","fase-3.png"];
if(dias<180) return ["Adolescente","fase-4.png"];
if(dias<365) return ["Adulto Jovem","fase-5.png"];
return ["Galo Lend√°rio","fase-6.png"];

}

/* ---------- PERSONALIDADE ---------- */

function personalidade(){

let maior = Object.entries(status).sort((a,b)=>b[1]-a[1])[0][0];

const mapa={
vitalidade:"Esp√≠rito Radiante",
forca:"Guardi√£o Forte",
foco:"Mente Afiada",
resistencia:"Alma Persistente",
percepcao:"Observador S√°bio"
};

return mapa[maior];
}

/* ---------- ATUALIZAR ---------- */

function atualizar(){

atributos.forEach(a=>{
document.getElementById(a+"Txt").innerText=status[a];
document.getElementById(a+"Bar").style.width=status[a]+"%";
});

/* idade */

const nasc=new Date(localStorage.getItem("dataNascimento"));
const dias=Math.floor((new Date()-nasc)/86400000);

document.getElementById("idade").innerText="Idade: "+calcularIdade();

/* fase */

let fase=faseIdade(dias);

document.getElementById("nivel").innerText=
"N√≠vel "+Math.floor((status.vitalidade+status.forca+status.foco+status.resistencia+status.percepcao)/5)
+" ‚Ä¢ "+fase[0];

document.getElementById("avatar").src=fase[1];

/* personalidade */

document.getElementById("personalidade").innerText=
"Personalidade: "+personalidade();

}

atualizar();
setInterval(atualizar,60000);

</script>

</body>
</html>
