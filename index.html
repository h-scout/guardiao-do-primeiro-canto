<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>O GuardiÃ£o do Primeiro Canto</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#d4af37">
<link rel="manifest" href="manifest.json">

<style>
body {
  background: linear-gradient(180deg, #d4af37, #b8962e);
  color: #1a1a1a;
  font-family: Arial, sans-serif;
  padding: 20px;
}

h1 {
  text-align: center;
  margin-bottom: 10px;
}

#fase {
  text-align: center;
  font-weight: bold;
  margin-bottom: 20px;
}

.status {
  margin: 12px 0;
}

.bar {
  background: rgba(0,0,0,0.2);
  height: 20px;
  width: 100%;
  border-radius: 10px;
  overflow: hidden;
}

.fill {
  height: 100%;
  transition: width 0.3s;
}

.vitalidade { background: #e53935; }
.forca { background: #6d4c41; }
.disciplina { background: #1e88e5; }
.confianca { background: #43a047; }
.instinto { background: #fdd835; }

button {
  width: 100%;
  padding: 14px;
  margin: 6px 0;
  background: #1a1a1a;
  color: #fff;
  border: none;
  font-size: 16px;
  border-radius: 8px;
}

button:active {
  background: #000;
}

#log {
  margin-top: 20px;
  min-height: 70px;
  padding-top: 10px;
  border-top: 2px solid rgba(0,0,0,0.3);
  font-style: italic;
}
</style>
</head>

<body>

<h1>ğŸ“ O GuardiÃ£o do Primeiro Canto</h1>
<p id="fase"></p>

<div id="stats"></div>

<button onclick="acao('alimentar')">ğŸš Alimentar</button>
<button onclick="acao('cuidar')">ğŸ§¹ Cuidar do espaÃ§o</button>
<button onclick="acao('movimento')">ğŸƒ Movimento leve</button>
<button onclick="acao('contato')">ğŸ¤² Contato calmo</button>
<button onclick="acao('observar')">ğŸ‘ï¸ ObservaÃ§Ã£o silenciosa</button>

<div id="log"></div>

<script>
let galo = JSON.parse(localStorage.getItem("galo")) || {
  vitalidade: 20,
  forca: 10,
  disciplina: 10,
  confianca: 10,
  instinto: 5
};

const fases = [
  "Pintinho do Calor",
  "Aprendiz do TerritÃ³rio",
  "Vigilante Jovem",
  "Galo em FormaÃ§Ã£o",
  "O Primeiro Canto",
  "Galo LendÃ¡rio"
];

function faseAtual() {
  let media = (
    galo.vitalidade +
    galo.forca +
    galo.disciplina +
    galo.confianca +
    galo.instinto
  ) / 5;

  if (media < 25) return fases[0];
  if (media < 40) return fases[1];
  if (media < 60) return fases[2];
  if (media < 80) return fases[3];
  if (media < 95) return fases[4];
  return fases[5];
}

function limitar() {
  for (let k in galo) {
    if (galo[k] > 100) galo[k] = 100;
  }
}

function salvar() {
  localStorage.setItem("galo", JSON.stringify(galo));
}

function acao(tipo) {
  if (tipo === 'alimentar') {
    galo.vitalidade += 5;
    galo.forca += 2;
    escrever("ğŸš O alimento fortalece o corpo.");
  }
  if (tipo === 'cuidar') {
    galo.vitalidade += 3;
    galo.confianca += 2;
    escrever("ğŸ§¹ O ambiente molda o espÃ­rito.");
  }
  if (tipo === 'movimento') {
    galo.forca += 4;
    galo.instinto += 2;
    escrever("ğŸƒ O corpo aprende pelo movimento.");
  }
  if (tipo === 'contato') {
    galo.disciplina += 4;
    galo.confianca += 3;
    escrever("ğŸ¤² A calma cria confianÃ§a.");
  }
  if (tipo === 'observar') {
    galo.disciplina += 3;
    galo.instinto += 3;
    escrever("ğŸ‘ï¸ O guardiÃ£o que observa, antecipa.");
  }

  limitar();
  salvar();
  atualizar();
}

function atualizar() {
  document.getElementById("fase").innerText =
    "Fase atual: " + faseAtual();

  let html = `
  <div class="status">â¤ï¸ Vitalidade: ${galo.vitalidade}
    <div class="bar"><div class="fill vitalidade" style="width:${galo.vitalidade}%"></div></div>
  </div>

  <div class="status">ğŸ’ª ForÃ§a: ${galo.forca}
    <div class="bar"><div class="fill forca" style="width:${galo.forca}%"></div></div>
  </div>

  <div class="status">ğŸ“ Disciplina: ${galo.disciplina}
    <div class="bar"><div class="fill disciplina" style="width:${galo.disciplina}%"></div></div>
  </div>

  <div class="status">ğŸ›¡ï¸ ConfianÃ§a: ${galo.confianca}
    <div class="bar"><div class="fill confianca" style="width:${galo.confianca}%"></div></div>
  </div>

  <div class="status">ğŸ”¥ Instinto: ${galo.instinto}
    <div class="bar"><div class="fill instinto" style="width:${galo.instinto}%"></div></div>
  </div>
  `;

  document.getElementById("stats").innerHTML = html;
}

function escrever(txt) {
  document.getElementById("log").innerText = txt;
}

atualizar();
</script>

<script>
if ("serviceWorker" in navigator) {
  window.addEventListener("load", function () {
    navigator.serviceWorker.register("./sw.js");
  });
}
</script>

</body>
</html>
